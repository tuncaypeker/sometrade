////////////////////////////////////////////////////////////
//  Copyright by HPotter v1.0 14/04/2014
//  Bull Power Indicator
////////////////////////////////////////////////////////////

study(title = "Bull Power Indicator")
value = iff (close < open , //then 
            iff (close[1] < open ,  max(high - close[1], close - low), max(high - open, close - low)), // else
            iff (close > open, //then
                iff(close[1] > open,  high - low, max(open - close[1], high - low)), //else
                iff(high - close > close - low, //then
                    iff (close[1] < open, max(high - close[1], close - low), high - open), //else
                    iff (high - close < close - low, //then
                        iff(close[1] > open,  high - low, max(open - close, high - low)), //else
                        iff (close[1] > open, max(high - open, close - low),//else
                            iff(close[1] < open, max(open - close, high - low), high - low))))))

plot(value, style=line, linewidth=2, color=blue)